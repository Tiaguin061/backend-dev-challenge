generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id String @id @default(uuid())

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt()

  restaurant Restaurant[]

  @@map("users")
}

model Restaurant {
  id String @id @default(uuid())

  name          String
  address       String
  opening_hour  String
  profile_photo String?

  user_id String

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt()

  user              User                @relation(fields: [user_id], references: [id])
  restaurantProduct RestaurantProduct[]

  @@map("restaurants")
}

model RestaurantProduct {
  id String @id @default(uuid())

  name          String
  price         Int
  profile_photo String?

  product_category_id String
  restaurant_id       String

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt()

  restaurant                 Restaurant                   @relation(fields: [restaurant_id], references: [id])
  productCategory            RestaurantProductCategory    @relation(fields: [product_category_id], references: [id])
  restaurantProductPromocion RestaurantProductPromocion[]

  @@map("restaurant_products")
}

model RestaurantProductCategory {
  id String @id @default(uuid())

  name String

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt()

  restaurantProduct RestaurantProduct[]

  @@map("restaurant_product_category")
}

model RestaurantProductPromocion {
  id String @id @default(uuid())

  description           String
  promotional_price     Int
  start_promotion_date  DateTime
  end_promotion_date    DateTime
  restaurant_product_id String

  restaurantProduct RestaurantProduct @relation(fields: [restaurant_product_id], references: [id])

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt()

  @@map("restaurant_product_promotion")
}
